# Documentation Generator

Автоматический генератор технической документации для кодовых репозиториев с использованием анализа LLM.

## Описание

Этот инструмент анализирует кодовую базу проекта и генерирует структурированную техническую документацию в формате Markdown. Для каждого файла создается отдельная документация, а также общий обзор проекта с навигацией и анализом зависимостей.

## Возможности

- **Анализ множественных языков программирования**: Python, JavaScript, TypeScript, Java, C/C++, Rust, Go
- **Извлечение зависимостей**: Автоматический анализ импортов и зависимостей между модулями
- **Структурированная документация**: Создание README с навигацией и отдельных файлов документации
- **Граф зависимостей**: Визуализация связей между компонентами проекта
- **Параллельная обработка**: Использование нескольких потоков для ускорения генерации
- **Поддержка различных форматов**: Markdown, JSON, TOML, YAML и другие

## Установка

```bash
pip install -r requirements.txt
```

Настройте API ключ OpenRouter в файле `.env`:
```bash
OPENROUTER_API_KEY=your_api_key_here
```

## Использование

### Базовое использование

```bash
python main.py /path/to/your/project
```

### Расширенные опции

```bash
# Указать директорию для документации
python main.py /path/to/project --output ./my-docs

# Настроить количество параллельных потоков
python main.py /path/to/project --workers 5

# Предварительный просмотр (dry run)
python main.py /path/to/project --dry-run

# Подробное логирование
python main.py /path/to/project --verbose
```

### Примеры

```bash
# Документирование текущего проекта
python main.py ../jsonl2html

# Документирование с сохранением в отдельную папку
python main.py ../my-project --output ./project-docs

# Проверка что будет документировано без генерации
python main.py ../my-project --dry-run --verbose
```

## Архитектура

Проект состоит из следующих компонентов:

### Основные модули

- **`openrouter_client.py`** - Клиент для работы с OpenRouter API (Gemini 2.5 Pro)
- **`file_analyzer.py`** - Анализ файлов проекта и извлечение зависимостей
- **`documentation_generator.py`** - Основной класс для генерации документации
- **`main.py`** - Точка входа и CLI интерфейс

### Рабочий процесс

1. **Сканирование файлов** - Поиск и фильтрация файлов для документирования
2. **Анализ зависимостей** - Извлечение импортов и связей между модулями
3. **Генерация документации** - Создание документации для каждого файла через LLM
4. **Создание обзора** - Генерация общего README с навигацией
5. **Структурирование** - Создание финальной структуры документации

## Поддерживаемые языки

| Язык | Расширения | Анализ зависимостей |
|------|------------|-------------------|
| Python | `.py` | ✅ (import, from) |
| JavaScript | `.js`, `.jsx` | ✅ (import, require) |
| TypeScript | `.ts`, `.tsx` | ✅ (import, require) |
| Java | `.java` | ✅ (import) |
| C/C++ | `.c`, `.cpp`, `.h`, `.hpp` | ✅ (#include) |
| Rust | `.rs` | ✅ (use) |
| Go | `.go` | ✅ (import) |
| Config | `.toml`, `.yaml`, `.json` | ✅ |
| Docs | `.md`, `.txt` | ✅ |

## Результат

Генератор создает следующую структуру документации:

```
docs/
├── README.md                    # Главный обзор проекта
├── dependencies.md              # Граф зависимостей
├── file1.py.md                 # Документация для file1.py
├── file2.js.md                 # Документация для file2.js
└── subdirectory/
    └── module.py.md            # Сохраняется структура директорий
```

### Содержание README.md

- Обзор проекта и его назначение
- Архитектурное описание
- Описание основных модулей
- Граф зависимостей между компонентами
- Навигация по документации
- Ссылки на основные компоненты

### Содержание индивидуальных файлов

- Назначение и функциональность файла
- Описание классов, функций и методов
- Анализ зависимостей
- Архитектурные решения
- Примеры использования (при наличии)

## Настройка

### Переменные окружения

```bash
OPENROUTER_API_KEY=sk-or-v1-...    # Обязательно
OPENAI_BASE_URL=https://openrouter.ai/api/v1  # Опционально
```

### Настройка модели

По умолчанию используется `google/gemini-2.5-pro-preview`. Можно изменить в файле `openrouter_client.py`.

## Ограничения

- Требуется API ключ OpenRouter
- Генерация может занять время для больших проектов
- Качество документации зависит от качества кода и комментариев
- Есть лимиты на количество запросов к API

## Примеры проектов

Инструмент был протестирован на:
- **jsonl2html** - Python утилита для конвертации JSONL в HTML
- Различные JavaScript/TypeScript проекты
- Go и Rust проекты

## Разработка

Для разработки и тестирования:

```bash
# Клонирование и установка
git clone <repo>
cd playground
pip install -r requirements.txt

# Тестирование на примере проекта
python main.py ../jsonl2html --dry-run --verbose
```

## Лицензия

MIT License
